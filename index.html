<script>
const basePath = "/GTA-V-Asset-Gallery/public/thumbnails";
const genders = ["male", "female", "groups"];
const groups = ["ALL", "ACCS", "BERD", "DECL", "FEET", "HAIR", "HAND", "HEAD", "JBIB", "LOWR", "TASK", "TEEF", "UPPR"];
const maxImages = 300; // per category
const imageFormat = "png"; // change if jpg/webp

document.body.insertAdjacentHTML('beforeend', `
  <div id="galleryContainer" style="padding:20px;text-align:center;margin-top:140px;">
    <h2>GTA V Asset Gallery</h2>
    <div style="margin-bottom:20px;">
      <select id="genderSelect">${genders.map(g => `<option value="${g}">${g}</option>`).join('')}</select>
      <select id="groupSelect">${groups.map(g => `<option value="${g}">${g}</option>`).join('')}</select>
      <button id="loadBtn">Load Images</button>
    </div>
    <div id="gallery" style="display:flex;flex-wrap:wrap;justify-content:center;gap:8px;"></div>
  </div>
`);

async function loadImages() {
  const gender = document.getElementById("genderSelect").value;
  const group = document.getElementById("groupSelect").value;
  const folderPath = `${basePath}/${gender}/${group}/`;
  const gallery = document.getElementById("gallery");
  gallery.innerHTML = `<p>Loading ${folderPath}...</p>`;

  const fragment = document.createDocumentFragment();
  let foundAny = false;
  for (let i = 0; i < maxImages; i++) {
    const num = String(i).padStart(3, '0');
    const url = `${folderPath}mp_${gender[0]}_freemode_01_${group.toLowerCase()}_${num}.${imageFormat}`;
    const img = new Image();
    img.src = url;
    await new Promise(resolve => {
      img.onload = () => {
        foundAny = true;
        img.loading = "lazy";
        img.style.width = "128px";
        img.style.height = "128px";
        img.style.objectFit = "cover";
        img.style.borderRadius = "8px";
        img.style.boxShadow = "0 0 4px rgba(0,0,0,0.4)";
        fragment.appendChild(img);
        resolve();
      };
      img.onerror = resolve;
    });
  }

  gallery.innerHTML = "";
  if (!foundAny) {
    gallery.innerHTML = `<p>No images found in ${folderPath}</p>`;
  } else {
    gallery.appendChild(fragment);
  }
}

document.addEventListener("DOMContentLoaded", () => {
  document.getElementById("loadBtn").addEventListener("click", loadImages);
});
</script>
