<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My GTA Assets</title>
</head>
<body style="background:#111;color:#fff;margin:0;font-family:sans-serif;">

  <!-- Ads Banner -->
  <script type="text/javascript">
    atOptions = { 'key':'85349b9cf8f2795baf3bba4b26f2e528','format':'iframe','height':90,'width':728,'params':{} };
  </script>
  <script type="text/javascript" src="//www.highperformanceformat.com/85349b9cf8f2795baf3bba4b26f2e528/invoke.js"></script>

  <!-- Top Right Banner -->
  <div style="position:fixed; top:0; right:0; width:728px; height:90px; z-index:999;">
    <script type="text/javascript">
      atOptions = { 'key':'85349b9cf8f2795baf3bba4b26f2e528','format':'iframe','height':90,'width':728,'params':{} };
    </script>
    <script type="text/javascript" src="//www.highperformanceformat.com/85349b9cf8f2795baf3bba4b26f2e528/invoke.js"></script>
  </div>

  <!-- Right Side Native Ad -->
  <div style="position:fixed; right:0; top:120px; width:160px; z-index:999;">
    <script async="async" data-cfasync="false" src="//pl27708186.revenuecpmgate.com/b86bf2587acfea20d938e7ec6026c781/invoke.js"></script>
    <div id="container-b86bf2587acfea20d938e7ec6026c781"></div>
  </div>

  <!-- React bundle (old) -->
  <div id="root"></div>
  <script src="bundle.js"></script>

  <!-- === Gallery Loader === -->
  <script>
  const owner = "gta5assets"; // change if username different
  const repo = "GTA-V-Asset-Gallery"; // change if repo name different
  const baseFolder = "public/thumbnails";
  const genders = ["male", "female"];
  const groups = ["ALL", "ACCS", "BERD", "DECL", "FEET", "HAIR", "HAND", "HEAD", "JBIB", "LOWR", "TASK", "TEEF", "UPPR"];

  document.body.insertAdjacentHTML('beforeend', `
    <div id="galleryContainer" style="padding:20px;text-align:center;margin-top:140px;">
      <h2>GTA V Asset Gallery</h2>
      <div style="margin-bottom:20px;">
        <select id="genderSelect" style="padding:6px 10px;">${genders.map(g => `<option value="${g}">${g}</option>`).join('')}</select>
        <select id="groupSelect" style="padding:6px 10px;">${groups.map(g => `<option value="${g}">${g}</option>`).join('')}</select>
        <button id="loadBtn" style="padding:6px 14px;cursor:pointer;">Load Images</button>
      </div>
      <div id="status" style="margin:10px 0;color:#ccc;"></div>
      <div id="gallery" style="display:flex;flex-wrap:wrap;justify-content:center;gap:8px;"></div>
    </div>
  `);

  async function listFolder(path) {
    const api = `https://api.github.com/repos/${owner}/${repo}/contents/${path}`;
    try {
      const res = await fetch(api);
      if (!res.ok) return [];
      const data = await res.json();
      return data.filter(x => x.type === "file" && x.name.toLowerCase().endsWith(".png"))
                 .map(x => x.download_url);
    } catch (e) {
      console.error("Error fetching folder", e);
      return [];
    }
  }

  async function loadImages() {
    const gender = document.getElementById("genderSelect").value;
    const group = document.getElementById("groupSelect").value;
    const status = document.getElementById("status");
    const gallery = document.getElementById("gallery");
    gallery.innerHTML = "";
    status.textContent = "Loading images...";

    const folders = group === "ALL" ? groups.filter(g => g !== "ALL") : [group];
    let total = 0;

    for (const g of folders) {
      const path = `${baseFolder}/${gender}/${g}`;
      const imgs = await listFolder(path);
      for (const url of imgs) {
        const img = document.createElement("img");
        img.src = url;
        img.loading = "lazy";
        img.style.width = "128px";
        img.style.height = "128px";
        img.style.objectFit = "cover";
        img.style.borderRadius = "8px";
        img.style.boxShadow = "0 0 4px rgba(0,0,0,0.4)";
        gallery.appendChild(img);
        total++;
      }
    }

    status.textContent = total ? `Loaded ${total} images.` : "No images found.";
  }

  document.addEventListener("DOMContentLoaded", () => {
    document.getElementById("loadBtn").addEventListener("click", loadImages);
  });
  </script>

  <!-- Social bar ads -->
  <script type='text/javascript' src='//pl27708173.revenuecpmgate.com/a5/26/59/a526597337dc05bd49d4a48e8c83d1cb.js'></script>
</body>
</html>
